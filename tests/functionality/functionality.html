<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Functionality Tests</title>
  </head>
  <body>
    <script src="./functionality.js" type="module"></script>

    <script type="module">
      import {promises} from "/lib/esm/main.js";

      (async () => {
        const products = [
        {
          id: 1,
          name: "T-shirt",
          size: "lg",
          price: 100
        },
        {
          id: 2,
          name: "Socks",
          size: "md",
          price: 40
        },
        {
          id: 3,
          name: "Cap",
          size: "sm",
          price: 65
        }
        ];

        const getProductsBelowPrice = async (price) => {
        const getProductBelowPrice = (product) => {
          if (product.price < price) return product;
        };

        return promises({
          action: getProductBelowPrice,
          inputs: products,
          outputType: "multiple",
          filterOutput: true,
          onerror: "continue"
        });
        };

        const productsBelowPrice = await getProductsBelowPrice(50);
        console.log(productsBelowPrice);
      })();
    </script>
  </body>
</html>
